window.__require=function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var h=o[r]={exports:{}};e[r][0].call(h.exports,function(t){return i(e[r][1][t]||t)},h,h.exports,t,e,o,n)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({bgmove:[function(t,e,o){"use strict";cc._RF.push(e,"54bbbjGPmpBqrfeMuz/AnpL","bgmove");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.NewClass2=void 0;var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgpics=[],e.bg01=null,e.bg02=null,e.numbgs=1,e.bg01insight=!1,e.curbg=0,e.bgduration=4.5,e}return i(e,t),e.prototype.onLoad=function(){this.bg01=this.node.getChildByName("bg01"),this.bg02=this.node.getChildByName("bg02"),this.bg01.y=0,this.bg02.y=0},e.prototype.movestart=function(){var t=this;cc.resources.loadDir("source/background/"+Math.floor(Math.random()*this.numbgs).toString(),cc.SpriteFrame,function(e,o){t.bgpics=o.sort(function(t,e){return+t.name-+e.name}),t.bg01insight?t.bg01.getComponent(cc.Sprite).spriteFrame=t.bgpics[0]:t.bg02.getComponent(cc.Sprite).spriteFrame=t.bgpics[0],t.curbg=1,t.bgrun(),t.schedule(t.bgrun,t.bgduration,cc.macro.REPEAT_FOREVER)})},e.prototype.movestop=function(){this.unschedule(this.bgrun),this.bg01.getComponent(cc.Animation).stop(),this.bg02.getComponent(cc.Animation).stop()},e.prototype.bgrun=function(){this.bg01insight?this.bg02.getComponent(cc.Sprite).spriteFrame=this.bgpics[this.curbg]:this.bg01.getComponent(cc.Sprite).spriteFrame=this.bgpics[this.curbg],this.bg01insight?(this.bg01.getComponent(cc.Animation).play("bgmoveout").duration=this.bgduration,this.bg02.getComponent(cc.Animation).play("bgmovein").duration=this.bgduration):(this.bg01.getComponent(cc.Animation).play("bgmovein").duration=this.bgduration,this.bg02.getComponent(cc.Animation).play("bgmoveout").duration=this.bgduration),this.bg01insight=!this.bg01insight,this.curbg++,this.curbg==this.bgpics.length&&(this.curbg=0)},c([s],e)}(cc.Component));o.NewClass2=a,cc._RF.pop()},{}],coinchange:[function(t,e,o){"use strict";cc._RF.push(e,"6cbb5Md3g9AvYvQ0wUZMEdh","coinchange");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numbgs=1,e.curpic=0,e.obspics=[],e}return i(e,t),e.prototype.start=function(){var t=this;cc.resources.loadDir("source/coin"+Math.floor(Math.random()*this.numbgs).toString(),cc.SpriteFrame,function(e,o){t.obspics=o,t.changeframe(),t.schedule(t.changeframe,1/t.obspics.length,cc.macro.REPEAT_FOREVER)})},e.prototype.changeframe=function(){this.curpic++,this.curpic>=this.obspics.length&&(this.curpic=0),this.node.getComponent(cc.Sprite).spriteFrame=this.obspics[this.curpic]},c([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],coindet:[function(t,e,o){"use strict";cc._RF.push(e,"d3a7dRuM7lNEaJu8BdNM4NL","coindet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onBeginContact=function(){cc.find("Canvas").getComponent("main").onBeginContactCoin(),this.node.active=!1},c([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],heromove:[function(t,e,o){"use strict";cc._RF.push(e,"e9a18JupA5O9IAxE3isB91m","heromove");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.basegravity=-150,e.jumpspeed=200,e.rightcondition=!1,e.leftcondition=!1,e.stop=!1,e.jumpaudio=null,e.heropics=[],e}return i(e,t),e.prototype.movestart=function(){var t=this;cc.resources.loadDir("source/hero",cc.SpriteFrame,function(e,o){t.heropics=o}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyup,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.keydown,this),this.node.x=-430,this.node.y=0,this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),cc.director.getPhysicsManager().gravity=cc.v2(0,this.basegravity)},e.prototype.movestop=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyup,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.keydown,this),this.stop=!0},e.prototype.keyup=function(t){t.keyCode==cc.macro.KEY.space?this.herojump():t.keyCode==cc.macro.KEY.right?(this.rightcondition&&(this.stop=!0),this.rightcondition=!1):t.keyCode==cc.macro.KEY.left&&(this.leftcondition&&(this.stop=!0),this.leftcondition=!1)},e.prototype.keydown=function(t){t.keyCode==cc.macro.KEY.right?(this.stop=!1,this.rightcondition=!0,this.leftcondition&&(this.leftcondition=!1),this.herorightstart()):t.keyCode==cc.macro.KEY.left&&(this.stop=!1,this.leftcondition=!0,this.rightcondition&&(this.rightcondition=!1),this.heroleftstart())},e.prototype.herojump=function(){cc.audioEngine.playEffect(this.jumpaudio,!1),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.node.getComponent(cc.RigidBody).linearVelocity.x,this.jumpspeed)},e.prototype.herorightstart=function(){cc.director.getPhysicsManager().gravity=cc.v2(100,this.basegravity)},e.prototype.heroleftstart=function(){cc.director.getPhysicsManager().gravity=cc.v2(-100,this.basegravity)},e.prototype.update=function(){this.stop?(this.node.getComponent(cc.RigidBody).linearVelocity.x>0?cc.director.getPhysicsManager().gravity=cc.v2(-50,this.basegravity):cc.director.getPhysicsManager().gravity=cc.v2(50,this.basegravity),Math.abs(this.node.getComponent(cc.RigidBody).linearVelocity.x)<10&&(this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,this.node.getComponent(cc.RigidBody).linearVelocity.y))):this.node.getComponent(cc.RigidBody).linearVelocity.x>150?(cc.director.getPhysicsManager().gravity=cc.v2(cc.director.getPhysicsManager().gravity.x,this.basegravity),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(150,this.node.getComponent(cc.RigidBody).linearVelocity.y)):this.node.getComponent(cc.RigidBody).linearVelocity.x<-150&&(cc.director.getPhysicsManager().gravity=cc.v2(cc.director.getPhysicsManager().gravity.x,this.basegravity),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(-150,this.node.getComponent(cc.RigidBody).linearVelocity.y)),this.heropics.length>0&&(this.node.getComponent(cc.RigidBody).linearVelocity.y<0?this.node.getComponent(cc.Sprite).spriteFrame=this.heropics[0]:this.node.getComponent(cc.Sprite).spriteFrame=this.heropics[1])},c([a(cc.AudioClip)],e.prototype,"jumpaudio",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],main:[function(t,e,o){"use strict";cc._RF.push(e,"5fa56Xd3glIMowjVw6Z65Vs","main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgnode=null,e.heronode=null,e.obsnode=null,e.obsparent=null,e.coinnode=null,e.coinparent=null,e.floornode=null,e.tipstartnode=null,e.dieaudio=null,e.coinaudio=null,e.timepass=null,e.coinlabel=null,e.cointoplabel=null,e.obsPool=null,e.coinPool=null,e.gamestart=!1,e.gamestartdelay=!1,e.timenow=null,e.coincount=0,e.cointop=0,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.obsPool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.obsnode);this.obsPool.put(e)}for(this.coinPool=new cc.NodePool,t=0;t<2;t++){var o=cc.instantiate(this.coinnode);this.coinPool.put(o)}},e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyup,this)},e.prototype.maingamestart=function(){this.timenow=new Date,this.coincount=0,this.coinlabel.string="x "+this.coincount.toString(),this.tipstartnode.active=!1,this.bgnode.getComponent("bgmove").movestart(),this.heronode.getComponent("heromove").movestart(),this.schedule(this.obscreate,.5,cc.macro.REPEAT_FOREVER),this.schedule(this.coincreate,.75,cc.macro.REPEAT_FOREVER)},e.prototype.obscreate=function(){var t=this;if(Math.random()>.55&&this.obsPool.size()>0){var e=Math.random()+2.5,o=null;(o=this.obsPool.get()).parent=this.obsparent,o.x=1100,o.y=Math.floor(600*Math.random())-320,o.getComponent(cc.Animation).play("obsmove").duration=e,this.schedule(function(){t.obsPool.put(o)},e,0)}},e.prototype.coincreate=function(){var t=this;if(Math.random()>.5&&this.coinPool.size()>0){var e=Math.random()+2.5,o=null;(o=this.coinPool.get()).parent=this.coinparent,o.x=1100,o.y=Math.floor(600*Math.random())-320,o.active=!0,o.getComponent(cc.Animation).play("obsmove").duration=e,this.schedule(function(){t.coinPool.put(o)},e,0)}},e.prototype.maingameend=function(){var t=this;cc.audioEngine.playEffect(this.dieaudio,!1),this.coincount>this.cointop&&this.coincount>0&&(this.cointop=this.coincount,this.cointoplabel.string="x "+this.cointop.toString()),this.bgnode.getComponent("bgmove").movestop(),this.heronode.getComponent("heromove").movestop(),this.unschedule(this.obscreate),this.unschedule(this.coincreate),this.tipstartnode.active=!0,this.schedule(function(){t.gamestartdelay=!1},4,0)},e.prototype.eatcoin=function(){cc.audioEngine.playEffect(this.coinaudio,!1),this.coincount+=1,this.coinlabel.string="x "+this.coincount.toString()},e.prototype.update=function(){if(this.gamestart){var t=new Date;this.timepass.string=((t.getTime()-this.timenow.getTime())/1e3).toFixed(2).toString()}},e.prototype.onBeginContact=function(){this.gamestart&&(this.gamestart=!1,console.log("MAIN on collision enter"),this.maingameend())},e.prototype.onBeginContactCoin=function(){this.gamestart&&(console.log("MAIN on coin collision enter"),this.eatcoin())},e.prototype.keyup=function(t){t.keyCode==cc.macro.KEY.space&&(this.gamestartdelay||(this.gamestart=!0,this.gamestartdelay=!0,this.maingamestart()))},c([a(cc.Node)],e.prototype,"bgnode",void 0),c([a(cc.Node)],e.prototype,"heronode",void 0),c([a(cc.Node)],e.prototype,"obsnode",void 0),c([a(cc.Node)],e.prototype,"obsparent",void 0),c([a(cc.Node)],e.prototype,"coinnode",void 0),c([a(cc.Node)],e.prototype,"coinparent",void 0),c([a(cc.Node)],e.prototype,"floornode",void 0),c([a(cc.Node)],e.prototype,"tipstartnode",void 0),c([a(cc.AudioClip)],e.prototype,"dieaudio",void 0),c([a(cc.AudioClip)],e.prototype,"coinaudio",void 0),c([a(cc.Label)],e.prototype,"timepass",void 0),c([a(cc.Label)],e.prototype,"coinlabel",void 0),c([a(cc.Label)],e.prototype,"cointoplabel",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],obschange:[function(t,e,o){"use strict";cc._RF.push(e,"1accewiLmtItbYh/qWNAg+i","obschange");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numbgs=5,e.curpic=0,e.obspics=[],e}return i(e,t),e.prototype.start=function(){var t=this;cc.resources.loadDir("source/obatacle"+Math.floor(Math.random()*this.numbgs).toString(),cc.SpriteFrame,function(e,o){t.obspics=o,t.changeframe(),t.schedule(t.changeframe,1/t.obspics.length,cc.macro.REPEAT_FOREVER)})},e.prototype.changeframe=function(){this.curpic++,this.curpic>=this.obspics.length&&(this.curpic=0),this.node.getComponent(cc.Sprite).spriteFrame=this.obspics[this.curpic]},c([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],obsdet:[function(t,e,o){"use strict";cc._RF.push(e,"c5c89MBy+NE4b6GT730/AE8","obsdet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onBeginContact=function(){cc.find("Canvas").getComponent("main").onBeginContact()},c([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}]},{},["bgmove","coinchange","coindet","heromove","main","obschange","obsdet"]);
//# sourceMappingURL=index.js.map
